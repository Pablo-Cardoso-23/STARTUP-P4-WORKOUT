<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Acompanhamento - P4 WORKOUT</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: black;
        }

        h1 {
            color: white;
            margin-bottom: 30px;
            font-weight: bold;
        }

        h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: black;
        }

        h3 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        span {
            color: red;
        }

        section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        nav {
            background-color: white;
        }

        nav .nav-link {
            font-size: 1.2rem !important;
            font-weight: bold;
        }

        nav a:hover {
            transform: scale(1.2);
            color: #ff6600;
        }

        .rotina-card {
            background-color: white;
            color: black;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .lista-exercicios {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .exercicio-item {
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .nome-exercicio {
            font-weight: 500;
            color: #333;
        }

        .botoes-exercicio .btn{
            font-size: 0.85rem;
            padding: 4px 8px;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

<header class="text-center py-3">
    <h1>P<span style="color:red;">4</span> WORKOUT</h1>
    <h3 class="mt-2">Acompanhamento Diário</h3>
</header>

<main class="flex-grow-1 container my-4">

    <div class="mb-4 text-center">
        <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#modalAddRegistro">+ Adicionar Registro</button>
    </div>

    {% if registros %}
    <table class="table table-dark table-striped text-center align-middle">
        <thead>
            <tr>
                <th>Data</th>
                <th>Calorias Consumidas</th>
                <th>Calorias Gastas</th>
                <th>Peso (kg)</th>
                <th>Água (ml)</th>
                <th>Treinos Realizados</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for reg in registros %}
            <tr>
                <td>{{ reg.data }}</td>
                <td>{{ reg.calorias_consumidas }}</td>
                <td>{{ reg.calorias_gastas }}</td>
                <td>{{ reg.peso }}</td>
                <td>{{ reg.agua }}</td>
                <td>{{ reg.treinos }}</td>
                <td>
                    <button class="btn btn-sm btn-dark" data-bs-toggle="modal" data-bs-target="#modalEditar{{ reg.id }}">Editar</button>
                    <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#modalExcluir{{ reg.id }}">Excluir</button>
                </td>
            </tr>

            <!-- Modal Editar -->
            <div class="modal fade" id="modalEditar{{ reg.id }}" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content text-dark">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Registro</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <form action="/acompanhamento/{{ reg.id }}/editar" method="post">
                            <div class="modal-body">
                                <input type="number" name="calorias_consumidas" class="form-control mb-2" value="{{ reg.calorias_consumidas }}" required>
                                <input type="number" name="calorias_gastas" class="form-control mb-2" value="{{ reg.calorias_gastas }}" required>
                                <input type="number" step="0.1" name="peso" class="form-control mb-2" value="{{ reg.peso }}" required>
                                <input type="number" name="agua" class="form-control mb-2" value="{{ reg.agua }}" required>
                                <input type="number" name="treinos" class="form-control mb-2" value="{{ reg.treinos }}" required>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-dark">Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="modalExcluir{{ reg.id }}" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content text-dark">
                        <div class="modal-header">
                            <h5 class="modal-title">Excluir Registro</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            Tem certeza que deseja excluir o registro do dia <strong>{{ reg.data }}</strong>?
                        </div>
                        <div class="modal-footer">
                            <form action="/acompanhamento/{{ reg.id }}/excluir" method="post">
                                <button type="submit" class="btn btn-danger">Excluir</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-center text-muted">Nenhum registro adicionado ainda.</p>
    {% endif %}

</main>

<div class="modal fade" id="modalAddRegistro" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content text-dark">
            <div class="modal-header">
                <h5 class="modal-title">Novo Registro</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form action="/acompanhamento/adicionar" method="post">
                <div class="modal-body">
                    <input type="number" name="calorias_consumidas" class="form-control mb-2" placeholder="Calorias Consumidas" required>
                    <input type="number" name="calorias_gastas" class="form-control mb-2" placeholder="Calorias Gastas" required>
                    <input type="number" step="0.1" name="peso" class="form-control mb-2" placeholder="Peso Corporal (kg)" required>
                    <input type="number" name="agua" class="form-control mb-2" placeholder="Água Consumida (ml)" required>
                    <input type="number" name="treinos" class="form-control mb-2" placeholder="Treinos Realizados" required>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-dark">Salvar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<nav class="navbar navbar-light bg-light fixed-bottom">
    <div class="container justify-content-around">
        <a class="nav-link text-black" href="/menu">Menu</a>
        <a class="nav-link text-black" href="/chatbot">Chat</a>
        <a class="nav-link text-black" href="/acompanhamento">Acompanhamento</a>
    </div>
</nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>